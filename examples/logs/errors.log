{
  "level": "info",
  "message": "✓ GoErrorKit logger initialized",
  "timestamp": "2025-11-19T22:52:22+07:00"
}
{
  "level": "info",
  "message": "✓ GoErrorKit logger initialized",
  "timestamp": "2025-11-20T10:33:42+07:00"
}
{
  "cause": "ERROR: cached plan must not change result type (SQLSTATE 0A000)",
  "error_type": "SYSTEM",
  "file": "base_auth_service.go:60",
  "function": "service.(*BaseAuthService[...]).Login",
  "level": "error",
  "message": "Lỗi khi đăng nhập",
  "path": "POST /api/auth/login",
  "timestamp": "2025-11-20T10:39:25+07:00"
}
{
  "data": {
    "method": "GET",
    "path": "/api/roles",
    "user_role_ids": [
      1
    ]
  },
  "error_type": "AUTH",
  "file": "base_authorization_middleware.go:178",
  "function": "middleware.(*BaseAuthorizationMiddleware[...]).Authorize.func1",
  "level": "error",
  "message": "Không có quyền truy cập",
  "path": "GET /api/roles",
  "timestamp": "2025-11-20T10:39:34+07:00"
}
{
  "data": {
    "method": "GET",
    "path": "/api/rules",
    "user_role_ids": [
      1
    ]
  },
  "error_type": "AUTH",
  "file": "base_authorization_middleware.go:178",
  "function": "middleware.(*BaseAuthorizationMiddleware[...]).Authorize.func1",
  "level": "error",
  "message": "Không có quyền truy cập",
  "path": "GET /api/rules",
  "timestamp": "2025-11-20T10:39:34+07:00"
}
{
  "error_type": "AUTH",
  "file": "base_auth_service.go:58",
  "function": "service.(*BaseAuthService[...]).Login",
  "level": "error",
  "message": "Email hoặc mật khẩu không đúng",
  "path": "POST /api/auth/login",
  "timestamp": "2025-11-20T10:39:40+07:00"
}
{
  "call_chain": [
    "main. (customUser.go:28)"
  ],
  "error_type": "PANIC",
  "file": "customUser.go:28",
  "function": "main.",
  "level": "error",
  "message": "Panic recovered: runtime error: invalid memory address or nil pointer dereference",
  "panic_value": "runtime error: invalid memory address or nil pointer dereference",
  "path": "POST /api/auth/register",
  "timestamp": "2025-11-20T10:39:41+07:00"
}
{
  "data": {
    "method": "DELETE",
    "path": "/api/rules/1",
    "user_role_ids": [
      1
    ]
  },
  "error_type": "AUTH",
  "file": "base_authorization_middleware.go:178",
  "function": "middleware.(*BaseAuthorizationMiddleware[...]).Authorize.func1",
  "level": "error",
  "message": "Không có quyền truy cập",
  "path": "DELETE /api/rules/1",
  "timestamp": "2025-11-20T10:39:44+07:00"
}
{
  "data": {
    "method": "PUT",
    "path": "/api/rules/1",
    "user_role_ids": [
      1
    ]
  },
  "error_type": "AUTH",
  "file": "base_authorization_middleware.go:178",
  "function": "middleware.(*BaseAuthorizationMiddleware[...]).Authorize.func1",
  "level": "error",
  "message": "Không có quyền truy cập",
  "path": "PUT /api/rules/1",
  "timestamp": "2025-11-20T10:39:46+07:00"
}
{
  "data": {
    "method": "POST",
    "path": "/api/rules",
    "user_role_ids": [
      1
    ]
  },
  "error_type": "AUTH",
  "file": "base_authorization_middleware.go:178",
  "function": "middleware.(*BaseAuthorizationMiddleware[...]).Authorize.func1",
  "level": "error",
  "message": "Không có quyền truy cập",
  "path": "POST /api/rules",
  "timestamp": "2025-11-20T10:39:48+07:00"
}
{
  "data": {
    "method": "GET",
    "path": "/api/rules",
    "user_role_ids": [
      1
    ]
  },
  "error_type": "AUTH",
  "file": "base_authorization_middleware.go:178",
  "function": "middleware.(*BaseAuthorizationMiddleware[...]).Authorize.func1",
  "level": "error",
  "message": "Không có quyền truy cập",
  "path": "GET /api/rules",
  "timestamp": "2025-11-20T10:39:50+07:00"
}
{
  "data": {
    "rule_id": "1"
  },
  "error_type": "BUSINESS",
  "file": "rule_service.go:117",
  "function": "service.(*RuleService).UpdateRule",
  "level": "error",
  "message": "Không tìm thấy rule",
  "path": "PUT /api/rules/1",
  "timestamp": "2025-11-20T10:40:13+07:00"
}
{
  "data": {
    "allowed": [
      "PUBLIC",
      "ALLOW",
      "FORBIDE"
    ],
    "field": "type",
    "received": "Public"
  },
  "error_type": "VALIDATION",
  "file": "rule_service.go:58",
  "function": "service.(*RuleService).AddRule",
  "level": "error",
  "message": "Type phải là PUBLIC, ALLOW hoặc FORBIDE",
  "path": "POST /api/rules",
  "timestamp": "2025-11-20T10:40:15+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_role_service.go:200",
  "function": "service.(*BaseRoleService[...]).ListRolesOfUser",
  "level": "error",
  "message": "Lỗi khi lấy danh sách role của user",
  "path": "GET /api/users/1/roles",
  "timestamp": "2025-11-20T10:40:24+07:00"
}
{
  "data": {
    "field": "id"
  },
  "error_type": "VALIDATION",
  "file": "base_role_service.go:38",
  "function": "service.(*BaseRoleService[...]).AddRole",
  "level": "error",
  "message": "ID role là bắt buộc",
  "path": "POST /api/roles",
  "timestamp": "2025-11-20T10:40:28+07:00"
}
{
  "level": "info",
  "message": "✓ GoErrorKit logger initialized",
  "timestamp": "2025-11-20T10:54:50+07:00"
}
{
  "error_type": "AUTH",
  "file": "base_auth_middleware.go:35",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Token không được cung cấp",
  "path": "GET /api/roles",
  "timestamp": "2025-11-20T10:55:06+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "PUT /api/blogs/1",
  "timestamp": "2025-11-20T10:55:25+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "DELETE /api/blogs/1",
  "timestamp": "2025-11-20T10:55:27+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "DELETE /api/rules/1",
  "timestamp": "2025-11-20T10:55:30+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "PUT /api/rules/1",
  "timestamp": "2025-11-20T10:55:35+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "POST /api/rules",
  "timestamp": "2025-11-20T10:55:37+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "GET /api/rules",
  "timestamp": "2025-11-20T10:55:39+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "GET /api/users/1/roles/*/check",
  "timestamp": "2025-11-20T10:55:42+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "DELETE /api/users/1/roles/*",
  "timestamp": "2025-11-20T10:55:43+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "POST /api/users/1/roles/*",
  "timestamp": "2025-11-20T10:55:44+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "GET /api/roles/1/users",
  "timestamp": "2025-11-20T10:55:46+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "POST /api/roles",
  "timestamp": "2025-11-20T10:55:48+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "GET /api/roles",
  "timestamp": "2025-11-20T10:55:49+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "POST /api/roles",
  "timestamp": "2025-11-20T10:55:51+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "DELETE /api/blogs/1",
  "timestamp": "2025-11-20T10:55:54+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "POST /api/blogs",
  "timestamp": "2025-11-20T10:55:55+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "GET /api/blogs/1",
  "timestamp": "2025-11-20T10:55:56+07:00"
}
{
  "cause": "record not found",
  "error_type": "SYSTEM",
  "file": "base_auth_middleware.go:47",
  "function": "middleware.(*BaseAuthMiddleware[...]).RequireAuth.func1",
  "level": "error",
  "message": "Người dùng không tồn tại",
  "path": "PUT /api/auth/profile",
  "timestamp": "2025-11-20T10:56:00+07:00"
}
{
  "call_chain": [
    "main. (customUser.go:28)"
  ],
  "error_type": "PANIC",
  "file": "customUser.go:28",
  "function": "main.",
  "level": "error",
  "message": "Panic recovered: runtime error: invalid memory address or nil pointer dereference",
  "panic_value": "runtime error: invalid memory address or nil pointer dereference",
  "path": "POST /api/auth/register",
  "timestamp": "2025-11-20T10:56:03+07:00"
}
{
  "error_type": "AUTH",
  "file": "base_auth_service.go:58",
  "function": "service.(*BaseAuthService[...]).Login",
  "level": "error",
  "message": "Email hoặc mật khẩu không đúng",
  "path": "POST /api/auth/login",
  "timestamp": "2025-11-20T10:56:05+07:00"
}
{
  "error_type": "AUTH",
  "file": "base_auth_service.go:58",
  "function": "service.(*BaseAuthService[...]).Login",
  "level": "error",
  "message": "Email hoặc mật khẩu không đúng",
  "path": "POST /api/auth/login",
  "timestamp": "2025-11-20T10:56:08+07:00"
}
